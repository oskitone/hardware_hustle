import styles from "@/styles/Rules.module.css";

import { ID_TITLE } from "components/sidebar";
import ActionsTable, { ACTIONS } from "components/actions-table";
import Graph from "components/graph";
import Icon, {
  Money,
  Opportunity,
  A,
  B,
  C,
  D,
  AB,
  ABC,
  ABCD,
} from "components/icon";
import Turn, { firstTurnSuppliedColumns } from "components/turn";
import Wordmark from "components/wordmark";

<Wordmark className={styles.Wordmark} draftId={props.draftId} />

A pen-and-paper game for 1+ players about sustainably running a small hardware business.

## Setup

Each player will need:

- Hardware Hustle game sheet
- Six-sided die
- Calculator (optional)
- 20 minutes or so, depending on number of players

## Starting the game

For games with multiple players, the highest die roller goes first, then proceed clockwise.

Fill out the "{ID_TITLE}" line in the top left, then familiarize yourself with the Actions table below it.

<ActionsTable className={styles.ActionsTable} />

Its icons represent:

- Parts
  - <A />: Fastener
  - <B />: Enclosure
  - <C />: Gear
  - <D />: Screen
- Widgets
  - <AB />: Amplifier
  - <ABC />: Music Player
  - <ABCD />: Sequencer
- <Money />: Money
- <Opportunity />: Opportunity

## Taking a turn

You can think of a turn like a typical workday: you wake up in the AM, do some stuff (Actions), and then rest in the PM. Ideally, the day's actions get you further towards your goal, which is, unfortunately, to make enough money to continue making money.

{/* TODO: think about how to combine icons w/ text into their own component */}

The turn's day is like a little spreadsheet. Here's an example of the first one when completed:

{/* TODO: confirm math... */}

<Turn
  className={styles.Turn}
  data={{
    money: [10, 9, undefined, 6, 7],
    A: [0, 2, 2, undefined, 0],
    B: [0, 2, 2, undefined, 0],
    C: [0, 1, 1, undefined, 0],
    D: [0, 0, 0, undefined, 0],
    AB: [0, undefined, 2, 1, 1],
    ABC: [0, undefined, 1, 0, 1],
    ABCD: [0, undefined, 0, 0, 0],
    opportunity: [12, 4, 4, 2, 2],
  }}
  suppliedColumns={firstTurnSuppliedColumns}
/>

You can see that its rows are grouped into Money, Parts, Widgets, and Opportunity.

Its columns are Actions and are filled out in order from left to right. Let's walk through it:

### 1. AM

Your first day on the job starts with <Icon id="money" prefix="10" /> and <Icon id="opportunity" prefix="12" /> but nothing else. Nothing to do here but note what you've got... which, for now, isn't much!

### 2. Buy

Let's buy some Parts.

**Roll for <Opportunity />:** Roll a die. Its value is the maximum you can spend on Opportunity for this particular Action. (Think of Opportunity as a combination of time/effort you _spend_ plus luck/goodwill you _receive_, all in one value.) Anyway, we'll say you rolled 5.

Parts cost Opportunity(<Opportunity />) and Money(<Money />), as shown in the Actions table. The <Opportunity /> cost is a row of values, but, for now, we'll only use the value with a dark outline.

<ActionsTable actions={[ACTIONS.BUY]} className={styles.ActionsTable} />

With <Money />10 and <Opportunity />12, you decide to buy <A />2, <B />2, and <C />1.

    <Money />1×<A />2 + <Money />2×<B />2 + <Money />3×<C />1 = <Money />9
    <Opportunity />0&times;<A />2 + <Opportunity />1&times;<B />2 + <Opportunity />2&times;<C />1 = <Opportunity />4

In the BUY column, you mark down the new values for the parts you bought and their <Opportunity />/<Money /> costs.

A couple things to call out:

- Cells are marked by their mathematical operation. We're spending <Money /> and <Opportunity />, so those cells have a "**-**". We're gaining Parts, so those cells have a "**+**".
- Unused cells have a gray background so we know to skip them for this Action.
- Cells with no change (like the <D /> in our example) can be filled with 0 or left blank.
- We rolled 5 for Opportunity but only spent 4. That's okay. Mark down what you spent, not rolled. You cannot spend more Opportunity than you roll.
- Similarly, you cannot spend more Money than you have.

### 3. Make

Now we'll make Widgets from Parts.

**Roll for <Opportunity />.** Call it 4.

{/* TODO: consistent #xIcon */}

Making Widgets costs Opportunity and Parts.

<ActionsTable actions={[ACTIONS.MAKE]} className={styles.ActionsTable} />

You make 2x<AB /> and 1x<ABC />, marked in their columns.

{/* TODO: math */}

The <AB /> consumed 1x<A />+1x<B />, and the <ABC /> took 1x<A />+1x<B />+1x<C />. Those total to 2x<A />, 2x<B />, and 1x<C />.

Total <Opportunity /> cost is 4 (<Icon id="opportunity" suffix="1" />x2 + <Icon id="opportunity" suffix="2" />x1). 4 is the max we rolled, so that's perfect. There's no <Money /> cost because you already bought the parts you're using.

### 4. Sell

The last Action of our turn is to Sell Widgets.

**Roll for <Opportunity />.** We'll say it's 3.

Selling consumes Widgets (of course) and Opportunity. Note that in Sell, we _gain_ Money.

<ActionsTable actions={[ACTIONS.SELL]} className={styles.ActionsTable} />

Here you sell 1x<AB /> for its price of <Icon id="money" suffix="6" />, using <Icon id="opportunity" suffix="2" />, marking those values in their columns.

If we had rolled 4 for <Opportunity /> we could have sold 2x<AB />. See how that works? You can Buy/Sell/Make as much as you want within what you roll/have.

{/* TODO: math */}

### 5. PM

Tally up your Actions' math and end your turn in the PM column.

#### Money

You end with <Icon id="money" suffix="7" />, which can be plotted in the Money dot chart on the left of the game sheet. A productive day, but not super profitable...

<Graph
  values={[10, 7]}
  x_axis_labels={[0, 1, 2, 3]}
  y_axis_labels={[0, 10, 20, 30]}
  subset={true}
  className={styles.Graph}
/>

#### Opportunity

As for <Opportunity />, if you exhaust yourself and go negative, you **Burn Out** and lose the entire next turn! In this example, you have <Icon id="opportunity" suffix="2" /> so are safe.

Otherwise, **Roll for Research**. Its value is how much <Opportunity /> you'd need to successfully get better at one of the Actions.

{/* TODO: examples */}

#### Research

We'll say you roll 2, which, conveniently!, is all the <Opportunity /> we have left.

Remember how we've only been using the first column of <Opportunity /> values with the dark outline? You decide you want to be better at Making and use the Research there, so you cross out the previously used values to outline the whole column of new ones to their right.

{/* TODO: mark new PS values */}

<ActionsTable className={styles.ActionsTable} />

Nice! For the rest of the game, all Parts will cost one less <Opportunity />!

#### Handoff

When your turn's done, for games with multiple players, hand the die to the next player so they can take their turn.

### Starting the next turn

The values in your PM column carry over to the empty cells in the next turn's AM column, as denoted by the "**⇢**" prefix

Note that <Opportunity /> dwindles over the course of the game. Just like in real life, grinding all day is unsustainable.

## End of Game

### How to Win

The player with the most money at the end of the game _without Burning Out in the last turn_ wins!

(Unused Parts and unsold Widgets count for nothing, only Money.)

Solo play is solitaire; try to beat your best score.

### How to Lose

If you Burn Out in the last turn, you are too physically and emotionally exhausted to go to a very important family gathering the next day.

You were too preoccupied with money and lost sight of what really matters, so you lose.

_{props.year} CC BY-SA 4.0 Oskitone_

export default function Rules({ children, year, draftId }) {
  return (
    <div className={styles.rules}>
      {children}
    </div>
  );

}
